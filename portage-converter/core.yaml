skipped_resolutions:
  packages:
    - name: elt-patches
      category: app-portage

    - name: eselect-opengl
      category: app-eselect

    - name: binutils-apple
      category: sys-devel

    - name: gcc-apple
      category: sys-devel

    - name: openrc
      category: sys-apps

    - name: udev
      category: sys-fs

    - name: eudev
      category: sys-fs

    - name: sysvinit
      category: sys-apps

    # Until conflicts detection is fixed.
    - name: radiusclient-ng
      category: net-dialup

  categories:
    - virtual
#    - cat2


#include_files:
#  - artefacts/file1.yml

build_template_file: ../templates/build-pkg-uses.yaml.tmpl

artefacts:
- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    enabled:
      - acl
      - cryptsetup
      - gcrypt
      - hwdb
      - kmod
      - lz4
      - lzma
      - pam
      - pcre
      - policykit
      - resolvconf
      - seccomp
      - sysv-utils
      - zstd
      - cgroup-hybrid
  packages:
    - sys-apps/systemd

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    enabled:
      - acl
      - cxx
      - ncurses
      - nls
      - openmp
  packages:
    - sys-devel/gettext

- tree: multi-arch/packages/atoms
  uses:
    enabled:
      - atm
      - pam
  packages:
    - net-dialup/ppp

- tree: multi-arch/packages/atoms
  uses:
    enabled:
      - X
      - berkdb
      - dbus
      - zlib
      - readline
      - pcre
      - gdbm
      - gtk
  packages:
    - dev-lisp/clisp

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - bluetooth
  packages:
    - net-libs/libpcap

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - webkit
      - networkmanager
      - spidermonkey
      - mono
      - kde
      - gnome
  packages:
    - net-libs/libproxy

- tree: multi-arch/packages/atoms
  uses:
    # Avoid cycle with nvidia-drivers
    disabled:
      - cuda
      - gl
  packages:
    - sys-apps/hwloc

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: postgresql
          category: dev-db-12
        - name: openldap
          category: net-nds
  packages:
    - dev-libs/cyrus-sasl

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: gtk+
          category: x11-libs-3
  packages:
    - dev-qt/qtwidgets

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: cmake
          category: dev-util
  packages:
    - dev-libs/double-conversion

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: cmake
          category: dev-util
        - name: openldap
          category: net-nds
  packages:
    - app-arch/lz4


- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - d3d9
      - debug
      - gles1
      - osmesa
      - lm-sensors
      - unwind
      - valgrind
      - vulkan-overlay
      - video_cards_freedreno
      - video_cards_iris
      - video_cards_lima
      - video_cards_panfrost
      - video_cards_v3d
      - video_cards_vc4
      - video_cards_vivante
      - zink
  packages:
    - media-libs/mesa

- tree: multi-arch/packages/atoms
  uses:
    enabled:
      - amd64
      - amd64-linux
  packages:
    - media-libs/libjpeg-turbo

- tree: multi-arch/packages/atoms
  ignore_build_deps: false
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    disabled:
      - mono
      - qt5
      - gtk2
      # Disable it to avoid dep cycle. We need it with a split.
      - gtk
  packages:
    - net-dns/avahi

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    enabled:
      - acl
      - cryptsetup
      - gcrypt
      - hwdb
      - kmod
      - lz4
      - lzma
      - pam
      - pcre
      - policykit
      - resolvconf
      - seccomp
      - sysv-utils
      - zstd
      - cgroup-hybrid
  packages:
    - sys-apps/systemd

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    enabled:
      - bzip2
      - nls
      - readline
      - smartcard
      - ssl
  packages:
    - app-crypt/gnupg

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  packages:
    - app-i18n/fcitx
    - app-arch/xz-utils
    - app-arch/libarchive
    - sys-devel/gcc:9.3.0
    - dev-db/mysql-connector-c
    - dev-db/sqlite
    - dev-lang/python:3.7
    - dev-lang/python-exec
    - dev-lang/perl
    - dev-lang/vala:0.48
    - dev-lang/rust
    - dev-lang/tcl
    - dev-lang/nasm
    - dev-libs/boost
    - dev-libs/boehm-gc
    - dev-libs/elfutils
    - dev-libs/expat
    - dev-libs/fribidi
    - dev-libs/glib
    - dev-libs/gmp
    - dev-libs/gobject-introspection
    - dev-libs/gobject-introspection-common
    - dev-libs/libxml2
    - dev-perl/XML-SAX-Base
    - dev-python/cython
    - dev-util/meson
    - dev-util/ninja
    - dev-util/pkgconf
    - dev-util/gdbus-codegen
    - dev-util/ragel
    - dev-util/gtk-doc-am
    - dev-util/gtk-update-icon-cache
    - media-libs/alsa-topology-conf
    - media-libs/alsa-ucm-conf
    - media-libs/fontconfig
    - media-libs/libpng
    - media-libs/gd
    - media-libs/tiff
    - media-libs/libglvnd
    - media-libs/harfbuzz
    - net-mail/courier-imap
    - net-libs/libssh2
    - sys-apps/attr
    - sys-apps/findutils
    - sys-apps/util-linux
    - sys-apps/coreutils
    - sys-apps/dbus
    - sys-devel/clang:10
    - sys-devel/llvm:10
    - sys-devel/autoconf
    - sys-devel/autogen
    - sys-devel/automake
    - sys-devel/libtool
    - sys-devel/m4
    - sys-devel/make
    - sys-devel/patch
    - sys-devel/flex
    - sys-devel/llvm
    - sys-fs/lvm2
    - sys-fs/udev-init-scripts
    - sys-libs/ncurses
    - sys-libs/glibc
    - sys-libs/libunwind
    - sys-libs/llvm-libunwind
    - sys-libs/libcap
    - sys-libs/zlib
    - sys-kernel/linux-headers
    - sys-process/procps
    - sys-process/audit
    - x11-libs/libva
    - x11-libs/libxcb
    - x11-libs/libX11
    - x11-libs/libXcomposite
    - x11-libs/libXi
    - x11-libs/libXt
    - x11-libs/libXext
    - x11-libs/libXrender
    - x11-libs/libXfixes
    - x11-libs/gdk-pixbuf


- tree: multi-arch/packages/atoms
  packages:
    - app-admin/calamares
    - app-emulation/lxd
    - app-emulation/lxc
    - dev-util/cmake
    - media-libs/freetype
    - sys-apps/file
    - sys-apps/sed
    - sys-kernel/dracut
    - net-libs/nodejs
    - net-misc/curl
    - net-misc/openssh
    - x11-libs/libdrm

# Define the list of the files generated by Funtoo reposcan tool.
reposcan_sources:
#  - source1.json
  - /tmp/kit_cache/gentoo-master
#  - /tmp/kit_cache/geaaru_overlay-master

# Disable use of category with slot as requires. Default is without slot.
reposcan_requires_slot: true

reposcan_contraints:
  packages:
    - dev-lang/python:3.7
    - dev-lang/ruby:2.6
    - sys-devel/gcc:9.3.0

reposcan_disabled_use_flags:
  - emacs
  - doc
  - doctool
  - elibc_Darwin
  - elibc_FreeBSD
  - elibc_OpenBSD
  - elibc_NetBSD
  - elibc_SunOS
  - elibc_musl
  - elibc_uclibc
  - elogind
  - libressl
  - gtk-doc
  - gles2-only
  - python_single_target_python3_6
  - python_single_target_python3_8
  - python_single_target_python3_9
  # I disable pypy support atm
  - python_single_target_pypy3
  - python_targets_python2_7
  - python_targets_python3_6
  - python_targets_python3_8
  - python_targets_python3_9
  - python_targets_pypy3
  - ruby_targets_ruby25
  - ruby_targets_ruby24
  - ppc-aix
  - x86-winnt
  - kernel-builtin
  - kernel_Winnt
  - man
  - minimal
  # Cryptographic library for embedded systems
  - mbedtls
  - modules
  - openrc
#  - qt5
  - vim-syntax
  - test
  - savedconfig
  # ATM i disable selinux
  - selinux

  # Disable in GCC
  - objc-gc
  - systemtap
  # Disable in glib
  - fam

  - valadoc
  - cvs
  # Disable brotli support from freetype
  - brotli

  # Disabled for mesa lib
  - vulkan-overlay
  - valgrind

  - x86-fbsd
  - x64-macos
  - x64-cygwin
  - amd64-fbsd

reposcan_disabled_keywords:
  - ~amd64
