skipped_resolutions:
  packages:
    - name: elt-patches
      category: app-portage

    - name: eselect-opengl
      category: app-eselect

    - name: binutils-apple
      category: sys-devel

    - name: gcc-apple
      category: sys-devel

    - name: openrc
      category: sys-apps

    - name: udev
      category: sys-fs

    - name: eudev
      category: sys-fs

    - name: sysvinit
      category: sys-apps

    # Until conflicts detection is fixed.
    - name: radiusclient-ng
      category: net-dialup

  categories:
    - virtual
    - acct-group
    - acct-user
#    - cat2


#include_files:
#  - artefacts/file1.yml

build_template_file: ../templates/build-pkg-uses.yaml.tmpl
build_portage_template_file: ../templates/build-pkg-portage.yaml.tmpl

artefacts:
- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    enabled:
      - acl
      - cryptsetup
      - gcrypt
      - hwdb
      - kmod
      - lz4
      - lzma
      - pam
      - pcre
      - policykit
      - resolvconf
      - seccomp
      - sysv-utils
      - zstd
      - cgroup-hybrid
  packages:
    - sys-apps/systemd

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    enabled:
      - acl
      - cxx
      - ncurses
      - nls
      - openmp
  packages:
    - sys-devel/gettext

- tree: multi-arch/packages/atoms
  uses:
    enabled:
      - atm
      - pam
  packages:
    - net-dialup/ppp

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - gconf
      - gtk
      - libsamplerate
      - qt5
      - sox
      - system-wide
      - ofono-headset
  packages:
    - media-sound/pulseaudio

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - source
      - tk
      - xindy
  packages:
    - app-text/texlive-core

- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: python
          category: dev-lang-3.7
  uses:
    disabled:
      - ldap
  packages:
    - gnome-base/gconf:2

- tree: multi-arch/packages/atoms
  uses:
    enabled:
      - X
      - berkdb
      - dbus
      - zlib
      - readline
      - pcre
      - gdbm
      - gtk
  packages:
    - dev-lisp/clisp:2

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - test
      - java
      - tcl
  packages:
    - sys-libs/db:5.3

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - bluetooth
  packages:
    - net-libs/libpcap

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  uses:
    disabled:
      - webkit
      - networkmanager
      - spidermonkey
      - mono
      - kde
      - gnome
  packages:
    - net-libs/libproxy

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - gssapi
      - samba
  packages:
    - net-libs/libsoup:2.4


- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - custom-cflags
      - fbcon
      - libcaca
      - nas
      - oss
      - static-libs
      - tslib
  packages:
    - media-libs/libsdl

- tree: multi-arch/packages/atoms
  uses:
    enabled:
      - ecdsa
      - python
      - python_single_target_python3_7
      - systemd
  packages:
    - net-dns/unbound

- tree: multi-arch/packages/atoms
  uses:
    # Avoid cycle with nvidia-drivers
    disabled:
      - cuda
      - gl
  packages:
    - sys-apps/hwloc

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: postgresql
          category: dev-db-12
        - name: openldap
          category: net-nds
  packages:
    - dev-libs/cyrus-sasl:2

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: gtk+
          category: x11-libs-3
  packages:
    - dev-qt/qtwidgets:5

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: cmake
          category: dev-util
  packages:
    - dev-libs/double-conversion

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: cmake
          category: dev-util
        - name: openldap
          category: net-nds
  packages:
    - app-arch/lz4

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - latex
  packages:
    - app-text/xmlto

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - subunit
  packages:
    - dev-libs/check

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - armadillo
      - fits
      - gml
      - hdf5
      - java
      - jpeg2k
      - lzma
      - mdb
      - mysql
      - netcdf
      - odbc
      - ogdi
      - opencl
      - oracle
      - postgres
      - spatialite
      - sqlite
      - threads
      - webp
      - xls
  packages:
    - sci-libs/gdal

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - lprng-compat
      - static-libs
      - xinetd
  replacements:
    buildtime_deps:
      ignore:
        - name: gnutls
          category: net-libs
  packages:
    - net-print/cups

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: cups
          category: net-print
  packages:
    - x11-libs/gtk+:3

# Break gentoo buildtime dep cycle
- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: python
          category: dev-lang-3.7
  packages:
    - dev-libs/libclc
    - dev-libs/libnl:3
    - dev-python/dbus-python
    - dev-python/setuptools
    - dev-python/pyyaml
    - dev-python/pycairo
    - dev-python/pycparser
    - dev-python/pygobject:3
    - dev-util/glib-utils
    - dev-util/itstool
    - media-libs/alsa-lib
    - net-wireless/bluez
    - sys-apps/kmod

- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: python
          category: dev-lang-3.7
  uses:
    disabled:
      - d3d9
      - debug
      - gles1
      - osmesa
      - lm-sensors
      - unwind
      - xvmc
      - valgrind
      - vulkan-overlay
      - video_cards_freedreno
      - video_cards_iris
      - video_cards_lima
      - video_cards_panfrost
      - video_cards_v3d
      - video_cards_vc4
      - video_cards_vivante
      - zink
  packages:
    - media-libs/mesa


- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - audio
      - ftdi
      - inputlirc
  packages:
    - app-misc/lirc

- tree: multi-arch/packages/atoms
  uses:
    enabled:
      - amd64
      - amd64-linux
  packages:
    - media-libs/libjpeg-turbo


- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      # We use this deps directly from build-seed layer.
      ignore:
        - name: cmake
          category: dev-util
        - name: ninja
          category: dev-util
        - name: python
          category: dev-lang-3.7
  packages:
    - media-libs/vulkan-loader

- tree: multi-arch/packages/atoms
  replacements:
    buildtime_deps:
      ignore:
        - name: python
          category: dev-lang-3.7
  uses:
    disabled:
      - mono
      - qt5
      - gtk2
      # Disable it to avoid dep cycle. We need it with a split.
      - gtk
      # Avoid injection of twisted-core
      - bookmarks
  packages:
    - net-dns/avahi

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    enabled:
      - acl
      - cryptsetup
      - gcrypt
      - hwdb
      - kmod
      - lz4
      - lzma
      - pam
      - pcre
      - policykit
      - resolvconf
      - seccomp
      - sysv-utils
      - zstd
      - cgroup-hybrid
  packages:
    - sys-apps/systemd

- tree: multi-arch/packages/atoms
  uses:
    enabled:
      - http2
      - idn
      - kerberos
      - openssl
      - ssl
  packages:
    - net-misc/curl

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - dbi
      - lua
      - rados
      - rrdcgi
      - ruby
      - static-libs
      - tcl
      - test
  packages:
    - net-analyzer/rrdtool

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - X
      - elf
      - kmem
      - lm-sensors
      - mfd-rewrites
      - minimal
      - mysql
      - netlink
      - pcap
      - pci
      - python
      - rpm
      - smux
  packages:
    - net-analyzer/net-snmp

- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - chromaprint
      - cuda
      - dav1d
      - flite
      - fontconfig
      - frei0r
      - fribidi
      - gcrypt
      - gme
      - hardcoded-tables
      - iec61883
      - kvazaar
      - ladspa
      - libaom
      - libaribb24
      - libass
      - libcaca
      - libilbc
      - librtmp
      - libsoxr
      - libtesseract
      - libxml2
      - lv2
      - mipsdspr1
      - mipsdspr2
      - mipsfpu
      - mmal
      - modplug
      - opencl
      - oss
      - pic
      - rubberband
      - samba
      - snappy
      - ssh
      - static-libs
      - video_cards_nvidia
      - wavpack
      - zeromq
      - zimg
      - zvbi
  packages:
    - media-video/ffmpeg


- tree: multi-arch/packages/atoms
  uses:
    disabled:
      - addc
      - addns
      - ceph
      - cluster
      - dmapi
      - fam
      - gpg
      - iprint
      - json
      - profiling-data
      - snapper
      - syslog
      - system-heimdal
  packages:
    - net-fs/samba

- tree: multi-arch/packages/atoms
  override_version: "3.7.9+1"
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    disabled:
      - build
      - tk
      - examples
      - hardened
      - libressl
      - test
      - wininst
  packages:
    - dev-lang/python:3.7

- tree: multi-arch/packages/atoms
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    disabled:
      - debug
      - eglfs
      - evdev
      - gles2-only
      - test
      - tslib
      - tuio
      - vnc
  packages:
    - dev-qt/qtgui:5

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    enabled:
      - bzip2
      - nls
      - readline
      - smartcard
      - ssl
  packages:
    - app-crypt/gnupg

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  override_version: "1.2.11+1"
  packages:
    - sys-libs/zlib

- tree: multi-arch/packages/atoms
  override_version: "2.10.4+1"
  packages:
    - media-libs/freetype

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  uses:
    disabled:
      - gpm
      - ada
      - profile
      - threads
      - trace
  packages:
    - sys-libs/ncurses

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  uses:
    disabled:
      - xml
  packages:
    - sys-devel/clang:10

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  uses:
    disabled:
      - exegesis
      - gold
      - libedit
      - xar
      - xml
      - z3
  packages:
    - sys-devel/llvm:10

- tree: multi-arch/packages/atoms
  ignore_build_deps: true
  # To avoid cycle error on solver for packages
  # available already from layers/build-seed i
  # ignore buildtime deps.
  packages:
    - app-misc/ca-certificates
    - app-i18n/fcitx
    - app-arch/xz-utils
    - app-arch/libarchive
    - sys-devel/gcc:9.3.0
    - dev-db/mysql-connector-c
    - dev-db/sqlite
    - dev-lang/python-exec
    - dev-lang/perl
    - dev-lang/vala:0.48
    - dev-lang/rust
    - dev-lang/tcl
    - dev-lang/nasm
    # BDEPEND of go requires itself.
    - dev-lang/go
    - dev-libs/boost
    - dev-libs/boehm-gc
    - dev-libs/elfutils
    - dev-libs/expat
    - dev-libs/fribidi
    - dev-libs/glib
    - dev-libs/gmp
    - dev-libs/gobject-introspection
    - dev-libs/gobject-introspection-common
    - dev-libs/icu
    - dev-libs/jsoncpp
    - dev-libs/json-c
    - dev-libs/libevdev
    - dev-libs/libxml2:2
    - dev-libs/libyaml
    - dev-perl/XML-SAX-Base
    - dev-python/cython
    - dev-python/constantly
    - dev-python/ply
    - dev-python/six
    - dev-util/meson
    - dev-util/ninja
    - dev-util/pkgconf
    - dev-util/gdbus-codegen
    - dev-util/ragel
    - dev-util/gtk-doc-am
    - dev-util/gtk-update-icon-cache
    - dev-util/vulkan-headers
    - media-libs/alsa-topology-conf
    - media-libs/alsa-ucm-conf
    - media-libs/fontconfig
    - media-libs/libpng
    - media-libs/gd
    - media-libs/tiff
    - media-libs/libglvnd
    - media-libs/harfbuzz
    - net-mail/courier-imap
    - net-libs/libssh2
    - sys-apps/attr
    - sys-apps/findutils
    - sys-apps/util-linux
    - sys-apps/coreutils
    - sys-apps/dbus
    - sys-devel/autoconf
    - sys-devel/autogen
    - sys-devel/automake
    - sys-devel/libtool
    - sys-devel/m4
    - sys-devel/make
    - sys-devel/patch
    - sys-devel/flex
    - sys-fs/lvm2
    - sys-fs/udev-init-scripts
    - sys-libs/glibc
    - sys-libs/libunwind
    - sys-libs/llvm-libunwind
    - sys-libs/libcap
    - sys-kernel/linux-headers
    - sys-process/procps
    - sys-process/audit
    - x11-libs/libva
    - x11-libs/libxcb
    - x11-libs/libX11
    - x11-libs/libXcomposite
    - x11-libs/libXi
    - x11-libs/libXt
    - x11-libs/libXext
    - x11-libs/libXrender
    - x11-libs/libXfixes
    - x11-libs/tslib
    - x11-libs/gdk-pixbuf


- tree: multi-arch/packages/atoms
  packages:
    - app-admin/calamares
    - app-emulation/lxd
    - app-emulation/lxc
    - dev-util/cmake
    - sys-apps/file
    - sys-apps/sed
    - sys-kernel/dracut
    - net-libs/nodejs
    - net-misc/openssh
    - x11-libs/libdrm

# Define the list of the files generated by Funtoo reposcan tool.
reposcan_sources:
#  - source1.json
  - /tmp/kit_cache/gentoo-master
#  - /tmp/kit_cache/geaaru_overlay-master

# Disable use of category with slot as requires. Default is without slot.
reposcan_requires_slot: true

reposcan_contraints:
  packages:
    - dev-lang/python:3.7
    - dev-lang/ruby:2.6
    - sys-devel/gcc:9.3.0

reposcan_disabled_use_flags:
  # !!internal use only!! used for creating build images and the first half of bootstrapping [make stage1]
  - build

  - emacs
  - doc
  - doctool
  - elibc_Darwin
  - elibc_FreeBSD
  - elibc_OpenBSD
  - elibc_NetBSD
  - elibc_SunOS
  - elibc_musl
  - elibc_uclibc
  - elogind
  - libressl
  - gtk-doc
  - gles2-only
  - python_single_target_python3_6
  - python_single_target_python3_8
  - python_single_target_python3_9
  # I disable pypy support atm
  - python_single_target_pypy3
  - python_targets_python2_7
  - python_targets_python3_6
  - python_targets_python3_8
  - python_targets_python3_9
  - python_targets_pypy3
  - ruby_targets_ruby25
  - ruby_targets_ruby24
  - ppc-aix
  - x86-winnt
  - kernel-builtin
  - kernel_Winnt
  - man
  - minimal
  # Cryptographic library for embedded systems
  - mbedtls
  - modules
  - openrc
#  - qt5
  - vim-syntax
  - test
  - savedconfig
  # ATM i disable selinux
  - selinux

  # Disable in GCC
  - objc-gc
  - systemtap
  # Disable in glib
  - fam

  - valadoc
  - cvs
  # Disable brotli support from freetype
  - brotli

  # Disabled for mesa lib
  - vulkan-overlay
  - valgrind

  - x86-fbsd
  - x64-macos
  - x64-cygwin
  - amd64-fbsd

reposcan_disabled_keywords:
  - ~amd64
